import{d as A,r as v,u as b,o,c as i,w as f,v as C,a as e,b as U,F as g,e as w,t as d,f as n,g as I,s as E,h as S,i as B,j as x,k as L,l as T,M as F,P as J,m as R}from"./index-725866e0.js";const j=[{id:"1",name:"buy a bread",money:-12,userId:"1",date:new Date},{id:"2",name:"salary",money:1200,userId:"1",date:new Date},{id:"3",name:"buy a bread",money:-12,userId:"1",date:new Date}],p="payments",O=A(p,{state:()=>({payments:JSON.parse(localStorage.getItem(p))||j}),getters:{},actions:{addPayment(_){this.payments.push(_),localStorage.setItem(p,JSON.stringify(this.payments))},deletePayment(_){this.payments=this.payments.filter(s=>s.id!==_),localStorage.setItem(p,JSON.stringify(this.payments))}}});const W=["onSubmit"],Y=e("label",{for:"userId"},"Choose user",-1),q=["value"],z=e("button",{class:"payment__button"},"Add Payment",-1),G={__name:"PaymentsFrom",setup(_){const s=v(""),c=v(0),l=v(""),u=b(),y=O(),h=()=>{s.value.length>0&&l.value.length>0&&y.addPayment({id:Math.floor(Math.random()*1e6),name:s.value,money:c.value,userId:l.value,date:new Date})};return(P,a)=>(o(),i("form",{class:"payment__wrapper",onSubmit:I(h,["prevent"])},[f(e("input",{class:"payment__input","onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),placeholder:"Enter payment name",type:"text"},null,512),[[C,s.value]]),f(e("input",{class:"payment__input","onUpdate:modelValue":a[1]||(a[1]=t=>c.value=t),placeholder:"Enter income/expense",type:"number"},null,512),[[C,c.value]]),Y,f(e("select",{class:"payment__input","onUpdate:modelValue":a[2]||(a[2]=t=>l.value=t),id:"userId"},[(o(!0),i(g,null,w(n(u).users,t=>(o(),i("option",{value:t.id},d(t.name),9,q))),256))],512),[[U,l.value]]),z],40,W))}};const H={class:"pay"},K={class:"pay__container"},Q=e("h1",{class:"pay__title"},"All payments",-1),X={key:0,class:"pay__list"},Z=["onClick"],ee=["onClick"],te={class:"details"},se={class:"details__text"},ae={class:"details__text"},ne={class:"details__text"},le={__name:"PaymentsView",setup(_){const s=O(),c=E(s),l=b(),[u,y]=S(c.payments.value[0]),[h,P]=S(l.users[0]),[a,t]=S(!1),M=()=>{t(!1)},$=r=>{r.target.classList.contains(J)&&t(!1)},D=r=>{t(!0),y(r),P(l.users.find(k=>k.id==r.userId))},N=r=>{s.deletePayment(r)};return(r,k)=>(o(),i(g,null,[e("main",H,[e("div",K,[B(G),Q,n(c).payments.value.length>0?(o(),i("ul",X,[(o(!0),i(g,null,w(n(s).payments,m=>(o(),i("li",{class:"pay__item",key:m.id,onClick:V=>D(m)},[R(d(m.name)+" ---------- "+d(new Date(m.date).toLocaleString())+" ",1),e("button",{class:"pay__delete",onClick:I(V=>N(m.id),["stop"])},"❌",8,ee)],8,Z))),128))])):x("",!0)])]),n(a)?(o(),L(F,{key:0,onOnCloseButtonClick:M,onOnOverlayClick:$,title:`${n(u).name} details`},{default:T(()=>[e("div",te,[e("p",se,"User: "+d(n(h).name),1),e("p",ae,"Income/ expense: "+d(n(u).money)+"$",1),e("p",ne,"Payments date: "+d(new Date(n(u).date).toLocaleString()),1)])]),_:1},8,["title"])):x("",!0)],64))}};export{le as default};
